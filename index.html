<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P-Career | Hệ Sinh Thái Tiếng Anh Nghề Nghiệp Phenikaa</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#1e1b4b', // Indigo 950
                            primary: '#4f46e5', // Indigo 600
                            accent: '#f59e0b', // Amber 500
                            light: '#f5f5f4', // Stone 100
                            white: '#ffffff'
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .gradient-text {
            background: linear-gradient(135deg, #4f46e5 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Chat UI */
        .chat-bubble { max-width: 85%; padding: 12px 16px; border-radius: 16px; margin-bottom: 12px; position: relative; font-size: 0.95rem; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .chat-user { background: #e0e7ff; color: #3730a3; margin-left: auto; border-bottom-right-radius: 4px; }
        .chat-ai { background: #ffffff; border: 1px solid #e5e7eb; color: #1f2937; margin-right: auto; border-bottom-left-radius: 4px; }
        .typing-dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; background-color: #6b7280; margin: 0 2px; animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        /* Custom Tab Styles */
        .tab-btn.active { background-color: #4f46e5; color: white; border-color: #4f46e5; }
        .tab-btn { transition: all 0.3s ease; }

        /* Flashcard Styles */
        .flashcard { perspective: 1000px; }
        .flashcard-inner { transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard:hover .flashcard-inner { transform: rotateY(5deg); } /* Subtle effect */

        /* Markdown Styles */
        .markdown-content ul { list-style-type: disc; padding-left: 20px; margin-bottom: 10px; }
        .markdown-content strong { font-weight: 700; color: #4f46e5; }
        .markdown-content h3 { font-size: 1.1em; font-weight: bold; margin-top: 10px; margin-bottom: 5px; color: #1e1b4b; }

        /* Chart Container */
        .chart-wrapper { position: relative; height: 300px; width: 100%; }
    </style>
</head>
<body class="bg-brand-light text-slate-800 antialiased overflow-x-hidden">

    <!-- NAVBAR -->
    <nav class="fixed w-full z-50 glass-panel shadow-sm transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-brand-primary to-brand-accent rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg">P</div>
                    <span class="font-bold text-2xl tracking-tight text-brand-dark">P-Career</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#home" class="text-slate-600 hover:text-brand-primary font-medium transition">Trang chủ</a>
                    <a href="#ecosystem" class="text-slate-600 hover:text-brand-primary font-medium transition">Hệ sinh thái</a>
                    <a href="#ai-tech" class="text-slate-600 hover:text-brand-primary font-medium transition">Công nghệ AI</a>
                    <a href="#business" class="text-slate-600 hover:text-brand-primary font-medium transition">Mô hình</a>
                </div>
                <button onclick="scrollToSection('demo')" class="bg-brand-dark text-white px-6 py-2.5 rounded-full font-semibold hover:bg-brand-primary transition shadow-md transform hover:scale-105 flex items-center">
                    <i class="fa-solid fa-bolt text-brand-accent mr-2"></i> Live Demo
                </button>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section id="home" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <!-- Background Decor -->
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-[600px] h-[600px] bg-brand-primary/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-[400px] h-[400px] bg-brand-accent/10 rounded-full blur-3xl"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="text-center max-w-4xl mx-auto">
                <div class="inline-flex items-center px-4 py-2 rounded-full bg-indigo-50 border border-indigo-100 text-brand-primary font-semibold text-sm mb-8 shadow-sm">
                    <span class="w-2 h-2 rounded-full bg-brand-accent mr-2 animate-pulse"></span>
                    Dành riêng cho 35.000+ Sinh viên Đại học Phenikaa
                </div>
                <h1 class="text-5xl lg:text-7xl font-extrabold tracking-tight mb-6 text-brand-dark leading-tight">
                    Career-Ready English: <br>
                    <span class="gradient-text">Học để làm nghề</span>, không chỉ để thi.
                </h1>
                <p class="text-xl text-slate-600 mb-10 max-w-2xl mx-auto leading-relaxed">
                    Hệ sinh thái chuyển đổi năng lực tiếng Anh chuyên ngành (ESP) đầu tiên tích hợp <strong>AI Generative</strong>, giúp bạn tự tin chinh phục nhà tuyển dụng quốc tế.
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="scrollToSection('demo')" class="px-8 py-4 bg-brand-primary text-white rounded-xl font-bold text-lg shadow-xl hover:shadow-2xl hover:bg-indigo-500 transition transform hover:-translate-y-1">
                        Trải nghiệm AI Tools
                    </button>
                    <button onclick="scrollToSection('ecosystem')" class="px-8 py-4 bg-white text-brand-dark border border-slate-200 rounded-xl font-bold text-lg shadow-md hover:bg-slate-50 transition">
                        Tìm hiểu Hệ sinh thái
                    </button>
                </div>
            </div>

            <!-- Hero Image / Visual -->
            <div class="mt-16 relative mx-auto max-w-5xl animate-float">
                <div class="bg-white rounded-2xl shadow-2xl border border-slate-100 overflow-hidden">
                    <div class="bg-slate-50 px-4 py-3 border-b border-slate-100 flex items-center space-x-2">
                        <div class="w-3 h-3 rounded-full bg-red-400"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                        <div class="w-3 h-3 rounded-full bg-green-400"></div>
                        <div class="ml-4 text-xs text-slate-400 font-mono">p-career-ai-lab.exe</div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2">
                        <div class="p-8 flex flex-col justify-center border-r border-slate-100">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center mr-4">
                                    <i class="fa-solid fa-robot text-brand-primary text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg">AI Interviewer</h3>
                                    <p class="text-sm text-slate-500">Active • Senior HR Manager Role</p>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <div class="chat-ai chat-bubble w-full">Welcome! I see you are applying for the <strong>Automotive Engineer</strong> position. Can you explain how a BMS system works?</div>
                                <div class="chat-user chat-bubble w-full">The BMS, or Battery Management System, is crucial for EVs. It monitors voltage, temperature...</div>
                                <div class="flex items-center text-xs text-green-600 font-semibold bg-green-50 px-3 py-1 rounded-full w-fit">
                                    <i class="fa-solid fa-check-circle mr-1"></i> Correct Terminology: BMS, EVs, Voltage
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-8 flex flex-col justify-center items-center">
                            <div class="text-center mb-6">
                                <h4 class="font-bold text-slate-700">Competence Radar</h4>
                                <p class="text-xs text-slate-500">Live Analysis</p>
                            </div>
                            <div class="chart-wrapper" style="height: 200px;">
                                <canvas id="heroRadarChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- LIVE DEMO SECTION (INTERACTIVE) -->
    <section id="demo" class="py-20 bg-slate-50 relative overflow-hidden">
        <!-- Decor -->
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
        
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col md:flex-row items-center mb-10 justify-between">
                <div>
                    <span class="text-brand-primary font-bold tracking-wider uppercase text-sm">Live Experience</span>
                    <h2 class="text-3xl font-bold text-brand-dark mt-2">P-Career AI Lab <i class="fa-solid fa-microchip text-brand-accent ml-2 animate-pulse"></i></h2>
                    <p class="text-slate-600">Trải nghiệm sức mạnh của Gemini 1.5 Pro trong việc đào tạo ngôn ngữ chuyên ngành.</p>
                </div>
                
                <!-- API Key Config -->
                <div class="mt-4 md:mt-0 bg-white p-2 rounded-lg shadow-sm border border-slate-200 flex items-center space-x-2">
                    <input type="password" id="apiKeyInput" placeholder="Enter Gemini API Key..." class="bg-slate-50 border-none outline-none text-sm px-2 py-1 w-48 rounded text-slate-700">
                    <button onclick="saveApiKey()" class="bg-brand-dark text-white text-xs px-3 py-1.5 rounded hover:bg-brand-primary transition">Save</button>
                </div>
            </div>

            <!-- Tab Selection -->
            <div class="flex flex-wrap gap-2 md:space-x-4 mb-6 justify-center md:justify-start">
                <button onclick="switchTab('interview')" id="tab-interview" class="tab-btn active px-6 py-2 rounded-full border border-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-user-tie mr-2"></i>AI Interviewer
                </button>
                <button onclick="switchTab('microlearning')" id="tab-microlearning" class="tab-btn px-6 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-lightbulb mr-2"></i>Micro-Learning
                </button>
                <button onclick="switchTab('email')" id="tab-email" class="tab-btn px-6 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-envelope mr-2"></i>Email Polisher
                </button>
                <!-- NEW FEATURE TAB -->
                <button onclick="switchTab('cv')" id="tab-cv" class="tab-btn px-6 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-file-contract mr-2"></i>CV Reviewer
                </button>
            </div>

            <!-- DEMO INTERFACE CONTAINER -->
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-slate-200 flex flex-col md:flex-row h-[600px] relative">
                
                <!-- LOADING OVERLAY -->
                <div id="loadingIndicator" class="absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50 hidden">
                    <div class="flex flex-col items-center">
                        <div class="flex space-x-2 mb-2">
                            <div class="w-3 h-3 bg-brand-primary rounded-full animate-bounce" style="animation-delay: 0s"></div>
                            <div class="w-3 h-3 bg-brand-accent rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-3 h-3 bg-brand-dark rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                        <span class="text-xs font-semibold text-brand-dark">Gemini is processing...</span>
                    </div>
                </div>

                <!-- 1. INTERVIEW MODE UI -->
                <div id="view-interview" class="w-full h-full flex flex-col md:flex-row">
                    <!-- Sidebar Control -->
                    <div class="w-full md:w-1/3 bg-slate-50 border-r border-slate-200 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-sliders mr-2"></i>Cấu Hình Phỏng Vấn</h3>
                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Chọn Ngành (Khoa)</label>
                                <select id="industrySelect" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-brand-primary outline-none">
                                    <option value="automotive">Kỹ thuật Ô tô (Automotive)</option>
                                    <option value="it">Công nghệ thông tin (IT)</option>
                                    <option value="medical">Y Dược (Medical/Pharmacy)</option>
                                    <option value="business">Kinh tế & QTKD (Business)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Cấp độ (Level)</label>
                                <select id="levelSelect" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-brand-primary outline-none">
                                    <option value="intern">Năm 1-2 (Foundation/Intern)</option>
                                    <option value="junior">Năm 3-4 (Pro/Junior)</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex-grow">
                            <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                                <h4 class="text-xs font-bold text-brand-primary mb-2 uppercase">Chế độ AI Mentor</h4>
                                <p class="text-xs text-slate-600 mb-3">AI sẽ đóng vai Nhà tuyển dụng, đặt câu hỏi chuyên môn và sửa lỗi cho bạn theo thời gian thực.</p>
                                <button onclick="startSimulation()" class="w-full py-2 bg-brand-primary text-white rounded-lg text-sm font-bold shadow hover:bg-indigo-700 transition flex items-center justify-center">
                                    <i class="fa-solid fa-play mr-2"></i> Bắt đầu Phỏng vấn
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Area -->
                    <div class="w-full md:w-2/3 flex flex-col bg-slate-50/50">
                        <div class="h-14 border-b border-slate-200 bg-white flex items-center px-6 justify-between">
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"></div>
                                <span class="font-semibold text-sm text-slate-700">Interview Session #PC-2025</span>
                            </div>
                            <button onclick="clearChat()" class="text-xs text-slate-400 hover:text-red-500 transition"><i class="fa-solid fa-trash"></i> Reset</button>
                        </div>
                        <div id="chatContainer" class="flex-grow overflow-y-auto p-6 space-y-4">
                            <div class="chat-ai chat-bubble">
                                Xin chào! Tôi là <strong>P-Career AI Mentor</strong>. <br>
                                Vui lòng nhập API Key và nhấn "Bắt đầu" để khởi động phiên phỏng vấn.
                            </div>
                        </div>
                        <div class="p-4 bg-white border-t border-slate-200">
                            <div class="flex items-center space-x-2 relative">
                                <input type="text" id="userInput" placeholder="Nhập câu trả lời của bạn (Tiếng Anh)..." class="flex-grow p-3 bg-slate-50 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-primary outline-none pr-10" onkeypress="handleKeyPress(event, 'chat')">
                                <button onclick="sendMessage()" class="bg-brand-dark text-white p-3 rounded-xl hover:bg-brand-primary transition shadow-md w-12 flex-shrink-0 flex items-center justify-center">
                                    <i class="fa-solid fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. MICRO-LEARNING MODE UI -->
                <div id="view-microlearning" class="w-full h-full flex hidden">
                    <!-- Config Side -->
                    <div class="w-full md:w-1/3 bg-slate-50 border-r border-slate-200 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-book-open mr-2"></i>Tạo Flashcard Chuyên ngành</h3>
                        <p class="text-sm text-slate-500 mb-6">Nhập một từ khóa chuyên ngành, AI sẽ tạo bài học nhỏ gồm định nghĩa, ngữ cảnh và câu hỏi kiểm tra.</p>
                        
                        <div class="space-y-4">
                             <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Chuyên ngành</label>
                                <select id="learnIndustry" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none">
                                    <option value="Automotive Engineering">Kỹ thuật Ô tô</option>
                                    <option value="Information Technology">CNTT</option>
                                    <option value="Medicine">Y học</option>
                                    <option value="Business Administration">Quản trị Kinh doanh</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Từ khóa (Term)</label>
                                <input type="text" id="learnInput" placeholder="VD: Transmission, API, ROI..." class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                            </div>
                            <button onclick="generateFlashcard()" class="w-full py-2.5 bg-brand-accent text-white rounded-lg font-bold shadow-md hover:bg-amber-600 transition">
                                <i class="fa-solid fa-magic mr-2"></i> Tạo Flashcard
                            </button>
                        </div>
                    </div>

                    <!-- Result Area -->
                    <div class="w-full md:w-2/3 bg-slate-100 p-8 flex items-center justify-center overflow-y-auto">
                        <div id="flashcardResult" class="bg-white w-full max-w-lg rounded-2xl shadow-xl p-8 border border-slate-200 min-h-[300px] flex flex-col justify-center items-center text-center">
                            <div class="text-slate-300 text-6xl mb-4"><i class="fa-solid fa-layer-group"></i></div>
                            <p class="text-slate-400">Kết quả bài học sẽ hiển thị tại đây.</p>
                        </div>
                    </div>
                </div>

                <!-- 3. EMAIL POLISHER MODE UI -->
                <div id="view-email" class="w-full h-full flex hidden">
                    <div class="w-full md:w-1/2 bg-white p-6 border-r border-slate-200 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-2"><i class="fa-solid fa-pen-nib mr-2"></i>Bản Nháp (Draft)</h3>
                        <p class="text-xs text-slate-500 mb-4">Nhập nội dung email thô (có thể sai ngữ pháp hoặc chưa trang trọng).</p>
                        <textarea id="emailInput" class="flex-grow p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none resize-none focus:ring-2 focus:ring-brand-primary" placeholder="VD: Hi Mr. John, I want to apply for job. Here is my CV. Thanks."></textarea>
                        <button onclick="polishEmail()" class="mt-4 w-full py-2.5 bg-brand-dark text-white rounded-lg font-bold shadow hover:bg-brand-primary transition">
                            <i class="fa-solid fa-wand-magic-sparkles mr-2"></i> Chuẩn hóa Business English
                        </button>
                    </div>
                    <div class="w-full md:w-1/2 bg-indigo-50 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-2"><i class="fa-solid fa-check-double mr-2"></i>Kết Quả (Polished)</h3>
                        <p class="text-xs text-slate-500 mb-4">Email đã được AI chỉnh sửa chuyên nghiệp.</p>
                        <div id="emailOutput" class="flex-grow p-4 bg-white border border-indigo-100 rounded-xl shadow-sm overflow-y-auto markdown-content text-sm text-slate-700">
                            <p class="text-slate-400 italic mt-10 text-center">Kết quả sẽ hiển thị tại đây...</p>
                        </div>
                        <button onclick="copyEmail()" class="mt-4 self-end text-xs text-brand-primary font-semibold hover:text-brand-dark"><i class="fa-regular fa-copy mr-1"></i> Copy Text</button>
                    </div>
                </div>

                <!-- 4. NEW: CV REVIEWER MODE UI -->
                <div id="view-cv" class="w-full h-full flex hidden">
                    <div class="w-full md:w-1/2 bg-white p-6 border-r border-slate-200 flex flex-col overflow-y-auto">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-magnifying-glass mr-2"></i>Phân tích CV</h3>
                        
                        <div class="mb-4">
                            <label class="block text-xs font-semibold text-slate-500 mb-1">Vị trí ứng tuyển (Target Role)</label>
                            <input type="text" id="cvRole" placeholder="VD: Junior Java Developer, Sales Executive..." class="w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                        </div>
                        
                        <div class="mb-4 flex-grow">
                            <label class="block text-xs font-semibold text-slate-500 mb-1">Nội dung CV (Paste Text)</label>
                            <textarea id="cvContent" class="w-full h-40 p-3 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none resize-none focus:border-brand-primary" placeholder="Dán nội dung CV tiếng Anh của bạn vào đây..."></textarea>
                        </div>

                        <button onclick="analyzeCV()" class="w-full py-2.5 bg-brand-primary text-white rounded-lg font-bold shadow hover:bg-indigo-700 transition">
                            <i class="fa-solid fa-chart-pie mr-2"></i> Chấm điểm CV
                        </button>
                    </div>

                    <div class="w-full md:w-1/2 bg-stone-50 p-6 flex flex-col overflow-y-auto">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-list-check mr-2"></i>Báo cáo Đánh giá</h3>
                        <div id="cvOutput" class="flex-grow p-4 bg-white border border-slate-200 rounded-xl shadow-sm markdown-content text-sm text-slate-700">
                            <div class="flex flex-col items-center justify-center h-full text-slate-400">
                                <i class="fa-regular fa-file-lines text-4xl mb-3"></i>
                                <p>Kết quả phân tích sẽ hiển thị tại đây.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-brand-dark text-slate-400 py-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0 text-center md:text-left">
                <div class="flex items-center justify-center md:justify-start space-x-2 mb-2">
                    <div class="w-8 h-8 bg-brand-primary rounded flex items-center justify-center text-white font-bold">P</div>
                    <span class="font-bold text-xl text-white">P-Career</span>
                </div>
                <p class="text-sm">Dự án Khởi nghiệp EdTech - Đại học Phenikaa 2025.</p>
            </div>
            <div class="flex space-x-6 text-sm">
                <a href="#" class="hover:text-white transition">Về chúng tôi</a>
                <a href="#" class="hover:text-white transition">Liên hệ</a>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. CHART JS SETUP ---
        document.addEventListener('DOMContentLoaded', function() {
            const ctxRadar = document.getElementById('heroRadarChart').getContext('2d');
            new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['Grammar', 'Pronunciation', 'Fluency', 'Tech Terms', 'Confidence'],
                    datasets: [{
                        label: 'Current Level',
                        data: [65, 59, 70, 45, 50],
                        fill: true,
                        backgroundColor: 'rgba(79, 70, 229, 0.2)',
                        borderColor: 'rgb(79, 70, 229)',
                        pointBackgroundColor: 'rgb(79, 70, 229)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(79, 70, 229)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { r: { angleLines: { display: false }, suggestedMin: 0, suggestedMax: 100, ticks: { display: false } } },
                    plugins: { legend: { display: false } }
                }
            });
        });

        // --- 2. GLOBAL VARIABLES & UTILS ---
        let apiKey = "";
        let chatHistory = [];
        
        function saveApiKey() {
            const input = document.getElementById('apiKeyInput').value;
            if(input.trim().length > 0) {
                apiKey = input.trim();
                alert("API Key đã lưu thành công! Bạn có thể sử dụng các tính năng AI.");
                document.getElementById('apiKeyInput').value = "*****************";
            } else {
                alert("Vui lòng nhập API Key hợp lệ.");
            }
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({behavior: 'smooth'});
        }

        function switchTab(tabName) {
            // Hide all views
            const views = ['interview', 'microlearning', 'email', 'cv'];
            views.forEach(v => {
                document.getElementById('view-' + v).classList.add('hidden');
                document.getElementById('view-' + v).classList.remove('flex'); // Remove flex when hidden
                
                const btn = document.getElementById('tab-' + v);
                if(btn) {
                    btn.classList.remove('active', 'bg-brand-primary', 'text-white', 'border-brand-primary');
                    btn.classList.add('bg-white', 'text-slate-600', 'border-slate-200');
                }
            });
            
            // Show selected view
            const selectedView = document.getElementById('view-' + tabName);
            selectedView.classList.remove('hidden');
            selectedView.classList.add('flex'); // Add flex back

            // Update active button
            const activeBtn = document.getElementById('tab-' + tabName);
            activeBtn.classList.add('active', 'bg-brand-primary', 'text-white', 'border-brand-primary');
            activeBtn.classList.remove('bg-white', 'text-slate-600', 'border-slate-200');
        }

        // --- 3. INTERVIEW SIMULATION LOGIC ---
        const industryPrompts = {
            "automotive": {
                role: "Senior Lead Engineer at VinFast/Tesla",
                context: "Candidate is applying for Junior Automotive Engineer. Focus on EV systems, BMS, and mechanical components.",
                firstQ: "Welcome. I've reviewed your CV. Could you start by describing your understanding of Battery Management Systems (BMS) in modern EVs?"
            },
            "it": {
                role: "Tech Lead at FPT Software/Google",
                context: "Candidate is applying for Junior Developer. Focus on algorithms, SDLC, and coding best practices.",
                firstQ: "Hello. Let's dive in. Can you explain the difference between RESTful API and GraphQL, and when you would use one over the other?"
            },
            "medical": {
                role: "Chief Pharmacist / Head Nurse",
                context: "Candidate is applying for Clinical Pharmacist/Nurse. Focus on patient care, drug interactions, and medical terminology.",
                firstQ: "Good morning. In a clinical setting, how would you explain the potential side effects of antibiotics to a patient with limited medical knowledge?"
            },
            "business": {
                role: "Marketing Director at a Multinational Corp",
                context: "Candidate is applying for Marketing Executive. Focus on market research, digital campaigns, and ROI.",
                firstQ: "Hi there. Can you walk me through a marketing campaign you admire and explain why it was successful from a strategic perspective?"
            }
        };

        function addMessage(sender, text, isHtml = false) {
            const container = document.getElementById('chatContainer');
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'chat-user chat-bubble' : 'chat-ai chat-bubble';
            if (isHtml) {
                div.innerHTML = text;
            } else {
                div.textContent = text;
            }
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function clearChat() {
            document.getElementById('chatContainer').innerHTML = '';
            chatHistory = [];
        }

        function startSimulation() {
            if (!apiKey) { alert("Vui lòng nhập API Key!"); return; }
            const industry = document.getElementById('industrySelect').value;
            const config = industryPrompts[industry];
            clearChat();
            
            chatHistory = [
                { role: "user", parts: [{ text: `System Instruction: You are a ${config.role}. ${config.context}. Goal: Assess English proficiency AND technical knowledge. Be professional & concise. Correct major errors briefly before asking next question.` }] },
                { role: "model", parts: [{ text: "Understood." }] }
            ];

            addMessage('ai', config.firstQ);
            chatHistory.push({ role: "model", parts: [{ text: config.firstQ }] });
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text || !apiKey) return;

            addMessage('user', text);
            input.value = '';
            document.getElementById('loadingIndicator').classList.remove('hidden');

            try {
                chatHistory.push({ role: "user", parts: [{ text: text }] });
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: chatHistory })
                });
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                addMessage('ai', marked.parse(aiText), true);
                chatHistory.push({ role: "model", parts: [{ text: aiText }] });
            } catch (error) {
                addMessage('ai', `Error: ${error.message}`);
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        function handleKeyPress(e, context) {
            if (e.key === 'Enter') {
                if(context === 'chat') sendMessage();
            }
        }

        // --- 4. MICRO-LEARNING LOGIC ---
        async function generateFlashcard() {
            if (!apiKey) { alert("Vui lòng nhập API Key!"); return; }
            const industry = document.getElementById('learnIndustry').value;
            const term = document.getElementById('learnInput').value;
            if(!term) return;

            document.getElementById('loadingIndicator').classList.remove('hidden');

            const prompt = `Act as an expert in ${industry}. Create a concise study flashcard for the term: "${term}".
            Format the response using Markdown with these exact sections:
            ### Definition
            (A simple, clear definition in English)
            ### Professional Context
            (A sentence showing how this term is used in a real work scenario)
            ### Quick Quiz
            (A multiple choice question about this term. Do not show the answer yet.)`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                const result = data.candidates[0].content.parts[0].text;
                
                document.getElementById('flashcardResult').innerHTML = `
                    <div class="text-left w-full markdown-content">
                        <h2 class="text-2xl font-bold text-brand-primary mb-4 border-b pb-2">${term}</h2>
                        ${marked.parse(result)}
                    </div>
                `;
            } catch (error) {
                alert("Error generating content: " + error.message);
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        // --- 5. EMAIL POLISHER LOGIC ---
        async function polishEmail() {
            if (!apiKey) { alert("Vui lòng nhập API Key!"); return; }
            const draft = document.getElementById('emailInput').value;
            if(!draft) return;

            document.getElementById('loadingIndicator').classList.remove('hidden');

            const prompt = `Act as a professional Business English editor. Rewrite the following email draft to be professional, polite, and concise. Fix any grammar errors.
            Draft: "${draft}"
            Provide ONLY the rewritten email body.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                const result = data.candidates[0].content.parts[0].text;
                document.getElementById('emailOutput').innerHTML = marked.parse(result);
            } catch (error) {
                alert("Error: " + error.message);
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        function copyEmail() {
            const text = document.getElementById('emailOutput').innerText;
            navigator.clipboard.writeText(text);
            alert("Copied to clipboard!");
        }

        // --- 6. CV REVIEWER LOGIC (NEW) ---
        async function analyzeCV() {
            if (!apiKey) { alert("Vui lòng nhập API Key!"); return; }
            const role = document.getElementById('cvRole').value;
            const cvText = document.getElementById('cvContent').value;
            
            if(!role || !cvText) {
                alert("Vui lòng nhập đầy đủ Vị trí và nội dung CV.");
                return;
            }

            document.getElementById('loadingIndicator').classList.remove('hidden');

            const prompt = `Act as a Senior Tech Recruiter. Analyze the following CV content against the target role: "${role}".
            CV Content: "${cvText}"
            
            Provide a detailed review in Markdown format with:
            1. **Match Score**: (0-100%)
            2. **Strengths**: What is good?
            3. **Weaknesses**: What is missing or weak?
            4. **Missing Keywords**: List specific ATS keywords missing for this role.
            5. **Improvement Plan**: 3 bullet points on how to fix this CV.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                const result = data.candidates[0].content.parts[0].text;
                document.getElementById('cvOutput').innerHTML = marked.parse(result);
            } catch (error) {
                alert("Error: " + error.message);
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        // Navbar Scroll Effect
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 50) {
                nav.classList.add('shadow-md', 'bg-white/90');
                nav.classList.remove('glass-panel');
            } else {
                nav.classList.remove('shadow-md', 'bg-white/90');
                nav.classList.add('glass-panel');
            }
        });
    </script>
</body>
</html>
